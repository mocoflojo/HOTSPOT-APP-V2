{
    "expira_en_1dia": {
        "nombre_visible": "Expira en 1Dia",
        "script_on_login": "## SCRIPT H\u00cdBRIDO: PROTECCI\u00d3N Y CREACI\u00d3N\r\n:local usuario \"$user\"\r\n:local duracion \"01:00:00\"\r\n\r\n## 1. VERIFICACI\u00d3N CRUCIAL\r\n## Verificamos si la tarea ya existe.\r\n:local tareaExiste [ :len [/system scheduler find name=\"$usuario\"] ]\r\n\r\n:if ($tareaExiste = 0) do={\r\n    \r\n    ## La tarea NO existe, la creamos.\r\n    \r\n    ## 2. C\u00c1LCULO DE TIEMPO\r\n    :local horaActual [/system clock get time]\r\n    :local fechaActual [/system clock get date]\r\n    :local horaFin ($horaActual + [:totime $duracion])\r\n    \r\n    ## 3. DEFINICI\u00d3N DEL COMANDO DE BORRADO\r\n    :local evento \"/ip hotspot active remove [find user=\\\"$usuario\\\"]; /ip hotspot user remove [find name=\\\"$usuario\\\"]; /system scheduler remove [find name=\\\"$usuario\\\"]\"\r\n\r\n    ## 4. CREACI\u00d3N INTELIGENTE DE LA TAREA (Intento/Fallo con respaldo de medianoche)\r\n    :do {\r\n        ## Intento 1: Crear normal (Fecha de hoy + Hora calculada)\r\n        /system scheduler add name=\"$usuario\" start-date=$fechaActual start-time=$horaFin interval=0s on-event=$evento\r\n        /log info \"? [Creado] Tarea agendada para $usuario. Expira a las $horaFin\"\r\n\r\n    } on-error={\r\n        ## Intento 2 (Respaldo): Si fall\u00f3 (ej. cambio de d\u00eda), usamos el modo inteligente\r\n        /log warning \"?? [Medianoche] Tarea agendada para ma\u00f1ana a las $horaFin (usuario: $usuario)\"\r\n        /system scheduler add name=\"$usuario\" start-time=$horaFin interval=0s on-event=$evento\r\n    }\r\n\r\n} else={\r\n    ## La tarea S\u00cd existe. No hacemos nada para NO RENOVAR el tiempo.\r\n    /log info \"?? [Protecci\u00f3n] La tarea para $usuario ya existe. Tiempo no renovado.\"\r\n}"
    }
}